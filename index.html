<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>PixelPop Digital – Digital First Agency</title>
 <meta name="description" content="Ship a stunning, high-converting site—fast. PixelPop designs & builds modern websites, apps, and growth engines with clean UI, tasteful motion, and measurable ROI.">

  <!-- Favicon: monitor symbol -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

 <!-- Google Tag Manager -->
 <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
 new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
 j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
 })(window,document,'script','dataLayer','GTM-59CZQJDT');</script>
 <!-- End Google Tag Manager -->
 
 <!-- Tailwind CSS and Google Fonts -->
 <script src="https://cdn.tailwindcss.com"></script>
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
 
 <style>
   /* Base styles using the new color scheme and Inter font */
   body {
     font-family: 'Inter', sans-serif;
     background-color: #0b1220;
     color: #0b1220;
   }
   /* Styles for the case study overlay transition */
   .case-study-overlay {
     opacity: 0;
     transform: translateY(20px);
     pointer-events: none;
     transition: opacity .3s ease, transform .3s ease;
   }
   .case-study-overlay.active {
     opacity: 1;
     transform: translateY(0);
     pointer-events: auto;
   }
   /* Prevents body scroll when the overlay is active */
   body.no-scroll {
     overflow: hidden;
   }
   .slider-track {
     transition: transform 0.5s ease-in-out;
   }
   .website-preview iframe {
     width: 100%;
     height: 100%;
     border: none;
     /* Added pointer-events none to prevent interaction inside the slider */
     pointer-events: none;
   }
   /* Styles for dynamic header text color */
   header {
       transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
   }
   header a, header span, header svg {
       transition: color 0.3s ease;
   }
   .header-on-light {
       background-color: rgba(255, 255, 255, 0.85);
       border-bottom: 1px solid rgba(0,0,0,0.1);
       backdrop-filter: blur(10px);
   }
   .header-on-light a, .header-on-light span, .header-on-light svg {
       color: #0b1220; /* Dark text */
   }
   .header-on-light nav a:hover {
       color: #5A99FC; /* Primary blue for hover */
   }
   .header-on-dark {
       color: #ffffff;
   }
 </style>
</head>
<body class="bg-[#0b1220]">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-59CZQJDT"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

 <!-- ===== Navbar ===== -->
 <header class='fixed top-0 w-full z-50 flex justify-between items-center px-6 md:px-10 lg:px-16 py-4 transition-all duration-300 text-white'>
   <a href="/" class="flex items-center gap-3">
     <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 14H3C2.44772 14 2 13.5523 2 13V5C2 4.44772 2.44772 4 3 4H21C21.5523 4 22 4.44772 22 5V13C22 13.5523 21.5523 14 21 14Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 8H6.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 8H9.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 20L17 20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 14V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
     <span class='text-2xl font-bold'>PixelPop</span>
   </a>
   <nav class='hidden md:flex gap-8 text-lg'>
     <a href='#services' class='hover:text-[#5A99FC]'>Services</a>
     <a href='#work' class='hover:text-[#5A99FC]'>Work</a>
     <a href='#contact' class='hover:text-[#5A99FC]'>Contact</a>
   </nav>
   <div class='hidden md:flex'>
     <a href='https://calendly.com/pixel-pop-digital' target="_blank" rel="noopener noreferrer" class='bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-4 py-2 rounded-lg text-sm font-semibold shadow-lg hover:scale-[1.03] transition-transform'>Book Call</a>
   </div>
   <button id='menu-btn' class='md:hidden p-1 rounded focus:outline-none focus:ring-2 focus:ring-white/70' aria-label='Open navigation menu' aria-expanded='false' aria-controls='mobile-menu'>
     <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor' class='w-8 h-8'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 6h16M4 12h16M4 18h16' /></svg>
   </button>
   <div id='mobile-menu' class='hidden absolute top-full inset-x-0 bg-[#0b1220]/95 text-white text-lg flex flex-col items-center space-y-6 py-8 md:hidden' role='dialog' aria-modal='true'>
     <a href='#services' class='hover:text-[#5A99FC] mobile-menu-link'>Services</a>
     <a href='#work' class='hover:text-[#5A99FC] mobile-menu-link'>Work</a>
     <a href='#contact' class='hover:text-[#5A99FC] mobile-menu-link'>Contact</a>
     <a href='https://calendly.com/pixel-pop-digital' target="_blank" rel="noopener noreferrer" class='bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-6 py-3 rounded-lg font-semibold shadow-lg mobile-menu-link'>Book Call</a>
   </div>
 </header>

 <main>
   <!-- ===== Hero Section ===== -->
   <section class='relative min-h-[92vh] flex flex-col justify-center items-center text-center text-white bg-[#0b1220] px-6 md:px-10 lg:px-16'>
     <div class="absolute inset-0 bg-black/60"></div>
     <div class='relative z-10' data-reveal>
       <h1 class='text-4xl md:text-6xl font-extrabold mb-4'>Your Digital Partner</h1>
       <p class='text-lg md:text-2xl max-w-3xl text-white/90'>Expert design, development, and digital marketing services</p>
       <div class='mt-8 flex flex-col md:flex-row gap-4 justify-center'>
         <a href='https://calendly.com/pixel-pop-digital' target="_blank" rel="noopener noreferrer" class='bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-6 py-3 rounded-xl text-lg font-bold shadow-lg hover:scale-105 transition-transform'>Book Call</a>
         <a href='#services' class='bg-white text-[#0b1220] px-6 py-3 rounded-xl text-lg font-semibold shadow-lg hover:scale-105 transition-transform'>See Services</a>
       </div>
     </div>
   </section>

   <!-- ===== AI Problem Analyzer Section ===== -->
   <section id='analyzer' class='bg-white text-[#0b1220] px-6 md:px-10 lg:px-16 py-16 md:py-24'>
     <div class="max-w-3xl mx-auto" data-reveal>
       <h2 class='text-4xl md:text-5xl font-bold text-center mb-4'>Discover Your Solution</h2>
       <p class='text-center text-lg max-w-2xl mx-auto mb-8'>Describe your business challenge, and our AI will suggest the best services to help you succeed.</p>
       <form id='ai-form' class='max-w-2xl mx-auto grid grid-cols-1 gap-4' novalidate>
         <label for='ai-problem' class='sr-only'>Describe your problem</label>
         <textarea id='ai-problem' name='problem' rows='4' maxlength='1000' required placeholder="e.g., 'My ROAS is low and I need a better digital marketing strategy.'" class='p-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]' aria-describedby='ai-help'></textarea>
         <p id='ai-help' class='text-sm text-gray-600'>Avoid sharing sensitive personal data. Max 1000 characters.</p>
         <div class='flex items-center gap-3'>
           <button id='ai-submit' type='button' class='bg-[#0b1220] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#131b2c] transition-colors disabled:bg-gray-400'>Analyze My Problem</button>
           <span id='ai-status' class='text-sm text-gray-600' aria-live='polite'></span>
         </div>
       </form>
       <!-- This container will be populated with the AI analysis results. -->
       <div id='ai-result' class='mt-8 hidden p-6 bg-gray-50 rounded-lg border'>
         <h3 class='text-2xl font-semibold mb-3'>Recommended Services</h3>
         <div id='ai-services' class='flex flex-wrap gap-2'></div>
         <h4 class='mt-5 font-semibold'>Analysis</h4>
         <p id='ai-reason' class='mt-2 text-gray-800'></p>
         <h4 class='mt-5 font-semibold'>Next Steps</h4>
         <ol id='ai-next-steps' class='mt-2 list-decimal list-inside text-gray-800 space-y-1'></ol>
         <a href='#contact' class='inline-block mt-6 bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-6 py-3 rounded-lg font-semibold shadow hover:scale-[1.02] transition-transform'>Book Free Strategy Call</a>
       </div>
     </div>
   </section>

   <!-- ===== Services Section ===== -->
   <section id='services' class='bg-[#eef4ff] text-[#0b1220] px-6 md:px-10 lg:px-16 py-16 md:py-24'>
     <div class="max-w-7xl mx-auto">
       <div class='text-center' data-reveal>
         <h2 class='text-4xl md:text-5xl font-bold mb-4'>Services</h2>
         <p class='text-lg text-center max-w-3xl mx-auto mb-12'>We create digital experiences that not only engage but also drive business growth.</p>
       </div>
       <div class='grid grid-cols-1 md:grid-cols-3 gap-8'>
         <!-- Design Card -->
         <article class='p-8 bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 hover:shadow-2xl hover:-translate-y-2' data-reveal>
           <div class="flex items-center gap-4 mb-4">
               <div class="bg-[#5A99FC]/10 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#5A99FC]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z" /></svg></div>
               <h3 class='text-2xl font-semibold text-[#0b1220]'>Design</h3>
           </div>
           <ul class='space-y-3 text-gray-600 flex-grow'>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Website Design</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Mobile App Design</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>WebApp Design</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>System Design</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Product Design</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>UI/UX Design & Audit</span></li>
           </ul>
         </article>
         <!-- Technology Card -->
         <article class='p-8 bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 hover:shadow-2xl hover:-translate-y-2' data-reveal>
           <div class="flex items-center gap-4 mb-4">
               <div class="bg-[#5A99FC]/10 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#5A99FC]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg></div>
               <h3 class='text-2xl font-semibold text-[#0b1220]'>Technology</h3>
           </div>
           <ul class='space-y-3 text-gray-600 flex-grow'>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Web Development</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Mobile Apps Development</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Web Apps Development</span></li>
           </ul>
         </article>
         <!-- Digital Marketing Card -->
         <article class='p-8 bg-white rounded-xl shadow-lg flex flex-col transition-all duration-300 hover:shadow-2xl hover:-translate-y-2' data-reveal>
           <div class="flex items-center gap-4 mb-4">
               <div class="bg-[#5A99FC]/10 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#5A99FC]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg></div>
               <h3 class='text-2xl font-semibold text-[#0b1220]'>Digital Marketing</h3>
           </div>
           <ul class='space-y-3 text-gray-600 flex-grow'>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>Performance Marketing</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>WhatsApp Marketing</span></li>
             <li class="flex items-start"><span class="text-[#3CC61A] mr-3 mt-1 flex-shrink-0">✓</span><span>SEO</span></li>
           </ul>
         </article>
       </div>
     </div>
   </section>

   <!-- ===== Case Studies Section ===== -->
    <section id='work' class='bg-white text-[#0b1220] px-6 md:px-10 lg:px-16 py-16 md:py-24 overflow-hidden'>
        <div class="max-w-7xl mx-auto">
            <h2 class='text-4xl md:text-5xl text-center font-bold mb-12' data-reveal>Case Studies</h2>
            <div id="case-study-slider" class="relative" data-reveal>
                <!-- Slides will be injected here by JavaScript -->
                <div class="slider-track flex"></div>

                <!-- Navigation Buttons -->
                <button id="prev-slide" class="absolute top-1/2 left-0 md:-left-4 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 shadow-md hover:bg-white transition z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <button id="next-slide" class="absolute top-1/2 right-0 md:-right-4 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm rounded-full p-2 shadow-md hover:bg-white transition z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                </button>

                <!-- Pagination Dots -->
                <div id="slider-dots" class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2"></div>
            </div>
        </div>
        <!-- Case Study Overlay Panel -->
        <div id='cs-panel' class='case-study-overlay fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4'>
            <article class='w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl p-6 md:p-10 relative'>
                <button id='cs-close' class='absolute top-4 left-4 text-[#0b1220] bg-gray-100 hover:bg-gray-200 rounded-full p-2 z-10' aria-label='Close case study'>
                    <svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' viewBox='0 0 20 20' fill='currentColor'><path fill-rule='evenodd' d='M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z' clip-rule='evenodd'/></svg>
                </button>
                <div id='cs-content'></div>
            </article>
        </div>
    </section>

   <!-- ===== Contact Section ===== -->
   <section id='contact' class='bg-[#0b1220] text-white px-6 md:px-10 lg:px-16 py-20'>
     <div class="max-w-xl mx-auto" data-reveal>
       <h2 class='text-4xl md:text-5xl font-bold text-center mb-6'>Get in Touch</h2>
       <p class='text-center max-w-xl mx-auto text-white/80 mb-10'>Have a project in mind? Fill out the form below and we’ll get back to you within 24 hours.</p>
       <div id="form-message" class="hidden p-4 mb-6 rounded-lg text-center"></div>
       <form id='pixelpop-form' class='max-w-xl mx-auto grid grid-cols-1 gap-6 bg-white text-[#0b1220] p-6 rounded-lg shadow-lg' novalidate>
         <div><label for='name' class='sr-only'>Name</label><input id='name' name='Name' type='text' placeholder='Name' required class='p-3 w-full rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]'></div>
         <div><label for='company' class='sr-only'>Company Name</label><input id='company' name='Company Name' type='text' placeholder='Company Name' class='p-3 w-full rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]'></div>
         <div><label for='email' class='sr-only'>Email</label><input id='email' name='Email' type='email' placeholder='Email' required class='p-3 w-full rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]'></div>
         <div><label for='phone' class='sr-only'>Phone Number</label><input id='phone' name='Phone Number' type='tel' placeholder='Phone Number' class='p-3 w-full rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]'></div>
         <div>
            <label for='services-required' class='sr-only'>Services Required</label>
            <select id='services-required' name='Services Required' required class='p-3 w-full rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5A99FC]'>
                <option value="" disabled selected>Select a service...</option>
                <optgroup label="Design">
                    <option>Website Design</option>
                    <option>Mobile App Design</option>
                    <option>WebApp Design</option>
                    <option>System Design</option>
                    <option>Product Design</option>
                    <option>UI/UX Design & Audit</option>
                </optgroup>
                <optgroup label="Technology">
                    <option>Web Development</option>
                    <option>Mobile Apps Development</option>
                    <option>Web Apps Development</option>
                </optgroup>
                <optgroup label="Digital Marketing">
                    <option>Performance Marketing</option>
                    <option>WhatsApp Marketing</option>
                    <option>SEO</option>
                </optgroup>
            </select>
        </div>
         <button type='submit' class='bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition-transform disabled:bg-gray-400'>Send Message</button>
       </form>
     </div>
   </section>
 </main>

 <!-- ===== Footer ===== -->
 <footer class='bg-[#0d1321] text-white px-6 md:px-10 lg:px-16 py-12'>
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
        <div>
            <h3 class="font-bold text-lg mb-4">PixelPop Digital</h3>
            <p class="text-gray-400">Bengaluru, Karnataka, India</p>
        </div>
        <div>
            <h3 class="font-bold text-lg mb-4">Get in Touch</h3>
            <ul class="space-y-2 text-gray-400">
                <li><a href="mailto:connect@pixelpopdigi.com" class="hover:text-[#5A99FC]">connect@pixelpopdigi.com</a></li>
                <li><a href="https://wa.me/919354049041" target="_blank" rel="noopener noreferrer" class="hover:text-[#5A99FC]">WhatsApp: +91 9354049041</a></li>
            </ul>
        </div>
        <div>
            <h3 class="font-bold text-lg mb-4">Follow Us</h3>
            <a href="https://www.linkedin.com/company/pixelpopdigital" target="_blank" rel="noopener noreferrer" class="inline-block p-2 bg-gray-700 rounded-full hover:bg-[#5A99FC] transition-colors">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" clip-rule="evenodd"/></svg>
            </a>
        </div>
    </div>
    <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-500 text-sm">
        &copy; 2025 PixelPop Digital. All rights reserved.
    </div>
 </footer>

 <script>
 document.addEventListener('DOMContentLoaded', () => {
   // Helper functions
   const $ = (s, r = document) => r.querySelector(s);
   const $$ = (s, r = document) => [...r.querySelectorAll(s)];
   const escapeHTML = (str = '') => str.replace(/[&<>\"']/g, c => ({'&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '\'': '&#39;'}[c]));

   // --- Mobile Menu ---
   const menuBtn = $('#menu-btn');
   const mobileMenu = $('#mobile-menu');
   if (menuBtn && mobileMenu) {
     const toggle = () => {
       const open = mobileMenu.classList.toggle('hidden');
       menuBtn.setAttribute('aria-expanded', String(!open));
     };
     menuBtn.addEventListener('click', toggle);
     $$('.mobile-menu-link', mobileMenu).forEach(l => l.addEventListener('click', toggle));
   }

   // --- Reveal on Scroll ---
   const revealTargets = $$('[data-reveal]');
   if ('IntersectionObserver' in window && revealTargets.length) {
     const io = new IntersectionObserver((entries) => {
       entries.forEach(e => {
         if (e.isIntersecting) {
           e.target.style.opacity = '1';
           e.target.style.transform = 'translateY(0)';
           io.unobserve(e.target);
         }
       });
     }, { threshold: 0.15 });
     revealTargets.forEach(el => {
       el.style.opacity = '0';
       el.style.transform = 'translateY(20px)';
       el.style.transition = 'opacity .7s ease-out, transform .7s ease-out';
       io.observe(el);
     });
   }

   // --- AI Analyzer Logic ---
   const aiForm = $('#ai-form');
   const aiBtn = $('#ai-submit');
   const aiTA = $('#ai-problem');
   const aiStatus = $('#ai-status');
   const aiOut = $('#ai-result');
   const aiChips = $('#ai-services');
   const aiReason = $('#ai-reason');
   const aiSteps = $('#ai-next-steps');
   let lastAISubmit = 0;

   async function getAIResponse(text) {
     const query = (text || '').slice(0, 1000).trim();
     if (!query) return { services: [], reason: '', steps: [] };

     try {
       // Build the absolute endpoint so that deployments under subdirectories work
       const endpoint = `${window.location.origin}/.netlify/functions/analyze`;
       const res = await fetch(endpoint, {
         method: 'POST',
         headers: { 'Content-Type': 'application/json' },
         body: JSON.stringify({ prompt: query })
       });
       if (res.ok) {
         const data = await res.json();
         if (data && Array.isArray(data.services)) {
           return data;
         }
       }
     } catch (err) {
       // Silent catch – fall through to heuristics
     }

     // Heuristic fallback mirroring server-side logic
     const t = query.toLowerCase();
     const buckets = new Set();
     const has = (...k) => k.some(w => t.includes(w));
     if (has('roas','ads','cpc','cac','retarget','facebook','google ads','meta ads')) buckets.add('Digital & Performance Marketing');
     if (has('slow','lcp','cls','web vitals','core web','performance','speed','develop','code','website')) buckets.add('Website & Web App Development');
     if (has('app','android','ios','play store','app store','mobile')) buckets.add('Mobile App Development');
     if (has('brand','ui','ux','landing','redesign','conversion','cvr','design')) buckets.add('Website Design');
     if (has('seo','organic','sitemap','crawl','index','schema')) { buckets.add('Website & Web App Development'); buckets.add('Digital & Performance Marketing'); }
     const services = Array.from(buckets).map(label => ({ label }));
     if (!services.length) services.push({ label:'Website Design' });
     return {
       services,
       reason:'Suggested by heuristic analyzer.',
       steps:['Clarify target audience.','Book a strategy call.','Scope discovery & timeline.']
     };
   }

   async function runAnalyzer() {
     const now = Date.now();
     if (now - lastAISubmit < 2000) {
       aiStatus.textContent = 'Please wait a moment...';
       return;
     }
     lastAISubmit = now;
     const text = (aiTA.value || '').slice(0, 1000).trim();
     if (!text) {
       aiTA.focus();
       aiStatus.textContent = 'Please describe your challenge.';
       aiOut.classList.add('hidden');
       return;
     }
     aiBtn.disabled = true;
     aiBtn.textContent = 'Analyzing…';
     aiStatus.textContent = 'Analyzing…';
     const result = await getAIResponse(text);
     aiChips.innerHTML = '';
     (result.services || []).forEach(s => {
       const span = document.createElement('span');
       span.className = 'inline-block bg-[#eef4ff] text-[#0b1220] border border-[#5A99FC] px-3 py-1 rounded-full text-sm font-medium';
       span.textContent = s.label;
       aiChips.appendChild(span);
     });
     aiReason.textContent = result.reason || 'Based on your input, these services fit best.';
     aiSteps.innerHTML = '';
     (result.steps || []).forEach(step => {
       const li = document.createElement('li');
       li.textContent = step;
       aiSteps.appendChild(li);
     });
     aiOut.classList.remove('hidden');
     aiStatus.textContent = 'Ready';
     aiBtn.disabled = false;
     aiBtn.textContent = 'Analyze My Problem';
   }

   if (aiBtn) aiBtn.addEventListener('click', runAnalyzer);
   if (aiForm) aiForm.addEventListener('submit', (e) => { e.preventDefault(); runAnalyzer(); });


   // --- Case Study Database & Overlay Logic ---
   const csPanel = $('#cs-panel');
   const csClose = $('#cs-close');
   const csContent = $('#cs-content');
   
   const CS_DB = {
     'hicom-india': {
       url: 'https://www.hicomindia.com/',
       fallbackImage: 'https://placehold.co/600x400/1e3a8a/ffffff?text=Industrial+Supplier',
       title: 'Hicom India: Organic Traffic & Lead Engine Overhaul',
       metrics: ['+148%', 'Organic Sessions', '+92%', 'Qualified Leads', '↑ 11.3', 'Avg. Position'],
       challenge: "Hicom India, a leading industrial supplier, had a technically sound website but struggled with stagnant organic traffic and a low volume of qualified leads.",
       approach: [
         'IA Restructuring & Technical SEO: We overhauled the site structure for better crawlability and fixed Core Web Vitals issues.',
         'Content & Authority Building: We developed topic clusters around their core services, creating content that targeted high-intent keywords.',
         'Lead Flow Revamp: We redesigned key landing pages, optimized forms, and implemented clear CTAs with analytics tracking.'
       ],
       results: 'The result was a significant, measurable growth within two quarters, turning the website into a self-sustaining lead generation engine.'
     },
     'thebtclub': {
       url: null, 
       fallbackImage: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=800&auto=format&fit=crop',
       title: 'TheBTclub: Scaling Performance Marketing',
       metrics: ['3x', 'Sales Growth', '4.5x', 'Return on Ad Spend', '5%', 'Reduction in RTOs'],
       challenge: 'TheBTclub, a fast-growing D2C apparel brand, faced scaling challenges with their paid media. Rising customer acquisition costs and a high return rate were eroding profitability.',
       approach: [
         'Account Restructuring: We rebuilt their Meta and Google ad accounts with a tiered campaign structure.',
         'Creative Testing Flywheel: We established a high-tempo creative testing process to combat ad fatigue and identify winning angles quickly.',
         'Offer & Funnel Optimization: We analyzed data to craft new bundle offers and optimized the checkout flow to increase AOV and reduce returns.'
       ],
       results: 'The project led to marked efficiency and profitability gains within eight weeks, providing a clear path to scale spend while maintaining a healthy blended ROAS.'
     },
     'hikalpaa': {
       url: 'https://www.hikalpaa.org/',
       fallbackImage: 'https://placehold.co/600x400/059669/ffffff?text=Preschool+Website',
       title: 'HiKalpaa.org: Achieving Admissions Target & Lead Optimization',
       metrics: ['+100%', 'Admissions Target Met', '+3x', 'Footfall Growth', '+78%', 'Lead Qualification Rate'],
       challenge: 'HiKalpaa, a leading preschool, faced challenges meeting their admissions target, fluctuating between 60-70%. Their lead generation flow lacked efficiency, leading to low-quality leads and inconsistent conversions.',
       approach: [
         'Lead Funnel Optimization: We implemented a WhatsApp flow for automated lead qualification, filtering high-intent leads.',
         'Targeted Campaigns: We launched Facebook and Instagram ads targeting Bengaluru parents, driving more relevant traffic.',
         'Enhanced User Journey: We revamped landing pages with clear CTAs and optimized forms to improve lead capture and conversion.'
       ],
       results: 'HiKalpaa reached 100% of their admissions target. The combination of targeted campaigns, automated lead qualification, and optimized landing pages helped HiKalpaa exceed their goals.'
     },
     'd2c-footwear': {
        url: null,
        fallbackImage: 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?q=80&w=1000&auto=format&fit=crop',
        title: 'Optimizing Paid Media for D2C Footwear Brand',
        metrics: ['+4.5x', 'Return on Ad Spend', '+2.5%', 'Conversion Rate Boost', '+25%', 'Increase in AOV'],
        challenge: 'A D2C footwear brand was struggling to optimize its paid media campaigns. While traffic was consistent, their ROAS was underperforming at 2.0x, and the conversion rate hovered around 1%.',
        approach: [
            'Paid Media Strategy Optimization: We refined audience segmentation, implementing more specific interest-based targeting and leveraging dynamic creative optimization.',
            'Landing Page Optimization: We A/B tested various landing page designs, focusing on improving the user experience and streamlining the checkout process.',
            'Product Bundling & Upselling: We introduced product bundling on the checkout page to increase AOV and total sales per customer.'
        ],
        results: 'Optimized targeting and creative strategies resulted in a significant improvement in ROAS, achieving 4.5x within three months. Website optimizations led to a steady increase in conversion rates from 1% to 2.5%.'
     }
   };

   function metricGrid(arr) {
     const pairs = [];
     for (let i = 0; i < arr.length; i += 2) { pairs.push([arr[i], arr[i + 1]]); }
     return '<div class="grid sm:grid-cols-3 gap-4 my-6">' + pairs.map(([big, small]) => `<div class="bg-[#e6f7e1] text-[#15803d] p-4 rounded-lg text-center"><p class="text-3xl font-extrabold">${escapeHTML(big||'')}</p><p class="text-sm">${escapeHTML(small||'')}</p></div>`).join('') + '</div>';
   }
   
   function bulletList(items) {
     return '<ul class="space-y-2">' + items.map(t => `<li class="flex items-start gap-3"><svg xmlns='http://www.w3.org/2000/svg' class='h-5 w-5 mt-1 text-[#5A99FC] flex-shrink-0' viewBox='0 0 20 20' fill='currentColor'><path fill-rule='evenodd' d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z' clip-rule='evenodd'/></svg><span>${escapeHTML(t)}</span></li>`).join('') + '</ul>';
   }

   function openCaseStudy(id) {
     const data = CS_DB[id];
     if (!data || !csPanel || !csContent) return;
     const html = `
       <h1 class='text-3xl md:text-4xl font-extrabold whitespace-pre-line'>${escapeHTML(data.title)}</h1>
       ${metricGrid(data.metrics)}
       <section class='mb-6'>
         <h2 class='text-2xl font-bold mb-2'>The Challenge</h2>
         <p class='text-gray-700'>${escapeHTML(data.challenge)}</p>
       </section>
       <section class='mb-6'>
         <h2 class='text-2xl font-bold mb-2'>Our Approach</h2>
         ${bulletList(data.approach)}
       </section>
       <section class='mb-6'>
         <h2 class='text-2xl font-bold mb-2'>The Results</h2>
         <p class='text-gray-700'>${escapeHTML(data.results)}</p>
       </section>
       <div class='mt-8'>
         <a href='#contact' class='inline-block bg-gradient-to-r from-[#3CC61A] to-[#5A99FC] text-white px-6 py-3 rounded-lg font-semibold shadow hover:scale-[1.02] transition-transform'>Start a Similar Project</a>
       </div>`;
     csContent.innerHTML = html;
     csPanel.classList.add('active');
     document.body.classList.add('no-scroll');
     history.pushState({ cs: id }, '', `#case/${id}`);
   }

   function closeCaseStudy() {
     csPanel.classList.remove('active');
     document.body.classList.remove('no-scroll');
     if (location.hash.startsWith('#case/')) {
       history.pushState({}, '', '#work');
     }
   }
   
   if (csClose) csClose.addEventListener('click', closeCaseStudy);
   if (csPanel) csPanel.addEventListener('click', (e) => { if (e.target === csPanel) closeCaseStudy(); });
   window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && csPanel.classList.contains('active')) closeCaseStudy(); });
   window.addEventListener('popstate', () => {
     if (location.hash.startsWith('#case/')) {
       const id = location.hash.split('/')[1];
       openCaseStudy(id);
     } else {
       if (csPanel.classList.contains('active')) closeCaseStudy();
     }
   });
   if (location.hash.startsWith('#case/')) {
     const id = location.hash.split('/')[1];
     openCaseStudy(id);
   }

    // --- Case Study Slider Logic ---
    const sliderTrack = $('.slider-track');
    const dotsContainer = $('#slider-dots');
    const caseStudies = Object.keys(CS_DB);
    let currentIndex = 0;
    let slideInterval;

    function createSlides() {
        if (!sliderTrack || !dotsContainer) return;
        sliderTrack.innerHTML = '';
        dotsContainer.innerHTML = '';

        caseStudies.forEach((key, index) => {
            const cs = CS_DB[key];
            const slide = document.createElement('div');
            slide.className = 'flex-shrink-0 w-full p-2';
            
            const previewContent = cs.url 
                ? `<iframe src="${cs.url}" class="w-full h-full" title="${cs.title} website preview" loading="lazy" sandbox="allow-scripts allow-same-origin"></iframe>`
                : `<img src="${cs.fallbackImage}" alt="${cs.title}" class="w-full h-full object-cover" loading="lazy">`;

            slide.innerHTML = `
                <div class="bg-gray-50 rounded-xl shadow-lg overflow-hidden md:grid md:grid-cols-2 md:items-center p-6 md:p-8 gap-8 transition-all duration-300 hover:shadow-2xl">
                    <div class="website-preview h-64 md:h-80 bg-gray-200 rounded-lg overflow-hidden border">
                        ${previewContent}
                    </div>
                    <div class="mt-6 md:mt-0 flex-grow flex flex-col">
                        <h3 class="text-2xl font-bold mb-3">${cs.title}</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-4">
                            ${cs.metrics.filter((_,i) => i % 2 === 0).map((m, i) => `
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-[#5A99FC]">${cs.metrics[i*2]}</p>
                                    <p class="text-xs text-gray-600">${cs.metrics[i*2+1]}</p>
                                </div>
                            `).join('')}
                        </div>
                        <a href='#case/${key}' data-case-id='${key}' class='cs-link text-[#5A99FC] hover:underline font-semibold mt-auto self-start'>Read Full Case Study →</a>
                    </div>
                </div>
            `;
            sliderTrack.appendChild(slide);

            const dot = document.createElement('button');
            dot.className = 'w-3 h-3 rounded-full transition';
            dot.dataset.index = index;
            dot.addEventListener('click', () => {
                goToSlide(index);
                resetInterval();
            });
            dotsContainer.appendChild(dot);
        });

        $$('.cs-link').forEach(a => a.addEventListener('click', (e) => {
            e.preventDefault();
            const id = a.getAttribute('data-case-id');
            openCaseStudy(id);
        }));
    }

    function updateSlider() {
        if (!sliderTrack) return;
        sliderTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
        $$('#slider-dots button').forEach((dot, index) => {
            dot.classList.toggle('bg-[#5A99FC]', index === currentIndex);
            dot.classList.toggle('bg-gray-300', index !== currentIndex);
        });
    }

    function goToSlide(index) {
        currentIndex = (index + caseStudies.length) % caseStudies.length;
        updateSlider();
    }

    function resetInterval() {
        clearInterval(slideInterval);
        slideInterval = setInterval(() => goToSlide(currentIndex + 1), 5000);
    }

    $('#prev-slide')?.addEventListener('click', () => {
        goToSlide(currentIndex - 1);
        resetInterval();
    });
    $('#next-slide')?.addEventListener('click', () => {
        goToSlide(currentIndex + 1);
        resetInterval();
    });
    
    // --- Dynamic Header on Scroll ---
    const header = $('header');
    const lightSections = $$('#analyzer, #services, #work'); 

    function updateHeaderStyle() {
        const scrollPosition = window.scrollY;
        let onLightBg = false;

        // Add a background only after scrolling down a bit
        if (scrollPosition > 50) {
            header.classList.add('backdrop-blur-md');
        } else {
            header.classList.remove('backdrop-blur-md');
        }

        // Check if header is over a light section
        lightSections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionBottom = section.offsetTop + section.offsetHeight;
            if (scrollPosition + header.offsetHeight > sectionTop && scrollPosition < sectionBottom) {
                onLightBg = true;
            }
        });

        if (onLightBg) {
            header.classList.add('header-on-light');
            header.classList.remove('header-on-dark');
        } else {
            header.classList.remove('header-on-light');
            header.classList.add('header-on-dark');
        }
    }

    window.addEventListener('scroll', updateHeaderStyle, { passive: true });
    
    // --- Contact Form Submission ---
    const contactForm = $('#pixelpop-form');
    const formMessage = $('#form-message');

    function validateEmail(email) {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }

    function validatePhone(phone) {
        const simpleRe = /^\d{10}$/;
        return simpleRe.test(phone.replace(/[\s-()+]/g, ''));
    }

    if(contactForm && formMessage) {
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const nameInput = $('#name');
            const emailInput = $('#email');
            const phoneInput = $('#phone');
            const serviceInput = $('#services-required');

            const name = nameInput.value.trim();
            const email = emailInput.value.trim();
            const phone = phoneInput.value.trim();
            const service = serviceInput.value;

            // --- Validation Logic ---
            if (!name) {
                formMessage.textContent = 'Please enter your name.';
                formMessage.className = 'p-4 mb-6 rounded-lg text-center bg-red-100 text-red-800';
                formMessage.classList.remove('hidden');
                return;
            }
            if (!email || !validateEmail(email)) {
                formMessage.textContent = 'Please enter a valid email address.';
                formMessage.className = 'p-4 mb-6 rounded-lg text-center bg-red-100 text-red-800';
                formMessage.classList.remove('hidden');
                return;
            }
            if (phone && !validatePhone(phone)) {
                formMessage.textContent = 'Please enter a valid 10-digit phone number.';
                formMessage.className = 'p-4 mb-6 rounded-lg text-center bg-red-100 text-red-800';
                formMessage.classList.remove('hidden');
                return;
            }
            if (!service) {
                formMessage.textContent = 'Please select a service.';
                formMessage.className = 'p-4 mb-6 rounded-lg text-center bg-red-100 text-red-800';
                formMessage.classList.remove('hidden');
                return;
            }
            
            const button = contactForm.querySelector('button[type="submit"]');
            const originalButtonText = button.textContent;
            
            button.disabled = true;
            button.textContent = 'Sending...';
            
            // Show success message immediately for better UX
            formMessage.textContent = "Thank you! Your message has been sent.";
            formMessage.className = 'p-4 mb-6 rounded-lg text-center bg-green-100 text-green-800';
            formMessage.classList.remove('hidden');
            
            const formData = new FormData(contactForm);
            contactForm.reset();
            
            setTimeout(() => {
                button.disabled = false;
                button.textContent = originalButtonText;
            }, 1000);

            // Submit data in the background
            fetch('https://script.google.com/macros/s/AKfycbxa5ZIrbYZO5kSGZT4LJeSuzr5Qo3CjVUon5JzHrrsHibOIFD8d0BIfgkAEbxpfHbIWUw/exec', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    console.error('Background form submission failed.', response);
                }
            })
            .catch(error => {
                console.error('Error during background form submission:', error);
            });
        });
    }

    createSlides();
    updateSlider();
    resetInterval();
    updateHeaderStyle(); // Initial check on load
 });
 </script>
</body>
</html>
